# =============================================================================
# imagemgr 本地配置
# =============================================================================
# 服务地址和端口：从 aiserver/config.yaml 读取（统一配置源）
# 本文件仅包含 imagemgr 特有的配置：索引定义、VLM 提示词等
# =============================================================================

# -----------------------------------------------------------------------------
# 索引定义（向量索引与模型的绑定关系）
# -----------------------------------------------------------------------------
indexes:
  # 图片嵌入索引
  siglip2_image_v1:
    model_name: siglip2-so400m-patch16-512
    model_version: "1.0"
    dimension: 1152
    description: 图片视觉嵌入索引

  # 文本嵌入索引 - Qwen3-4B
  qwen3_text_v1:
    model_name: Qwen3-4B
    model_version: "1.0"
    dimension: 2560
    service_name: qwen3_embed_local
    description: 文本描述嵌入索引（4B）

  # 文本嵌入索引 - BGE
  bge_text_v1:
    model_name: bge-large-zh
    model_version: "1.0"
    dimension: 1024
    service_name: bge_local
    description: 文本描述嵌入索引（BGE）

  # 文本嵌入索引 - Qwen3-8B（推荐）
  qwen3_8b_text_v1:
    model_name: Qwen3-Embedding-8B
    model_version: "1.0"
    dimension: 4096
    service_name: qwen3_8b_embed
    description: 文本描述嵌入索引（8B 高精度）

  # 文本嵌入索引 - SigLIP2（跨模态）
  siglip2_text_v1:
    model_name: siglip2-so400m-patch16-512
    model_version: "1.0"
    dimension: 1152
    service_name: siglip2_local
    description: SigLIP2 跨模态文本嵌入（与图片向量空间一致，支持文搜图）

# -----------------------------------------------------------------------------
# VLM 图片描述生成服务
# -----------------------------------------------------------------------------
vlm_services:
  # Qwen3-VL-8B 服务
  qwen3vl:
    name: "Qwen3-VL-8B"
    endpoint: http://localhost:6050  # 通过 SSH 转发
    timeout: 60
    is_enabled: true
    description: "通义千问 VL 8B 视觉语言模型"
  
  # 可以添加更多 VLM 服务
  # gemini:
  #   name: "Gemini Pro Vision"
  #   endpoint: http://localhost:6051
  #   timeout: 60
  #   is_enabled: false
  #   description: "Google Gemini 视觉模型"

# -----------------------------------------------------------------------------
# VLM 全局配置
# -----------------------------------------------------------------------------
vlm:
  # 默认使用的 VLM 服务
  default_service: qwen3vl
  
  # 提示词模板
  prompts:
    default: "请详细描述这张图片的内容，包括主要物体、场景、颜色、风格等特征。"
    short: "用一句话简洁描述这张图片。"
    detailed: "请详细地描述这张图片，包括：1)主要物体及其位置关系 2)场景和背景 3)颜色和光线 4)风格和氛围 5)任何文字或标识 6)如果你知道的话，再描述这个图片的外部背景。"
    tags: "请为这张图片生成10-20个描述性标签，用逗号分隔。"
    objects: "列出这张图片中所有可识别的物体，用逗号分隔。"
  
  default_prompt: default
