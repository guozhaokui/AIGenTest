# =============================================================================
# AI 服务统一配置
# =============================================================================
# 此文件是所有 AI 服务的唯一配置源
# aiserver 服务端、网关、imagemgr 都从此文件读取配置
# =============================================================================

# -----------------------------------------------------------------------------
# GPU 服务器 1：基础嵌入服务 (192.168.0.100)
# -----------------------------------------------------------------------------
embed_server_1:
  host: "192.168.0.100"
  services:
    siglip2:
      port: 6010
      model_name: "siglip2-so400m-patch16-512"
      model_version: "1.0"
      dimension: 1152
      timeout: 60
      description: "SigLIP2 图片嵌入"
    
    embed_4b:
      port: 6011
      model_name: "Qwen3-4B"
      model_version: "1.0"
      dimension: 2560
      timeout: 30
      description: "Qwen3-4B 文本嵌入"
    
    embed_bge:
      port: 6012
      model_name: "bge-large-zh"
      model_version: "1.0"
      dimension: 1024
      timeout: 30
      description: "BGE 文本嵌入"
    
    rerank_4b:
      port: 6013
      model_name: "Qwen3-4B"
      model_version: "1.0"
      timeout: 60
      description: "Qwen3-4B 重排序"
    
    zimage:
      port: 6006
      timeout: 120
      description: "Z-Image 图片生成"

# -----------------------------------------------------------------------------
# GPU 服务器 2：8B 专用嵌入模型 (192.168.0.132)
# -----------------------------------------------------------------------------
embed_server_2:
  host: "192.168.0.132"
  services:
    embed_8b:
      port: 6014
      model_name: "Qwen3-Embedding-8B"
      model_version: "1.0"
      dimension: 4096
      timeout: 30
      description: "Qwen3-Embedding-8B 文本嵌入"
      model_path: "/home/layabox/laya/guo/AIGenTest/aiserver/models/Qwen/Qwen3-Embedding-8B"
    
    rerank_8b:
      port: 6015
      model_name: "Qwen3-Reranker-8B"
      model_version: "1.0"
      timeout: 60
      description: "Qwen3-Reranker-8B 重排序"
      model_path: "/home/layabox/laya/guo/AIGenTest/aiserver/models/Qwen/Qwen3-Reranker-8B"

# -----------------------------------------------------------------------------
# VLM 服务（通过 SSH 端口转发）
# 启动转发：aiserver/qwen3vlm/port_forward.sh start
# -----------------------------------------------------------------------------
vlm:
  host: "localhost"
  port: 6050
  timeout: 60
  description: "Qwen3-VL-8B 视觉语言模型"

# -----------------------------------------------------------------------------
# Trellis 3D 生成服务
# -----------------------------------------------------------------------------
trellis:
  host: "localhost"
  port: 8000
  timeout: 120
  description: "Trellis 3D 模型生成"

# -----------------------------------------------------------------------------
# 默认模型选择
# -----------------------------------------------------------------------------
defaults:
  # 图片嵌入模型
  image_embedding: "siglip2"
  
  # 文本嵌入模型: embed_bge, embed_4b, embed_8b
  text_embedding: "embed_8b"  # 推荐使用 8B，精度更高
  
  # 重排序模型: rerank_4b, rerank_8b
  rerank: "rerank_8b"  # 推荐使用 8B，效果更好
  
  # 搜索时自动启用重排序
  auto_rerank: true

# -----------------------------------------------------------------------------
# 网关配置
# -----------------------------------------------------------------------------
gateway:
  port: 8080

